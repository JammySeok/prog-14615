<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@5" rel="stylesheet" type="text/css" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

</head>

<body class="min-h-screen flex flex-col">
<div id="main" class="h-[90vh] flex items-center justify-center">
    <div class="w-full max-w-md bg-white rounded-lg shadow-md p-8 bg-gray-100">
        <h2 class="text-xl font-semibold text-center mb-4">로그인</h2>
        <form class="space-y-4" onSubmit="checkSubmit(this); return false;">
            <div>
                <label htmlFor="username" class="block text-sm font-medium text-gray-700">
                    아이디
                </label>
                <input type="text" id="username" name="username" class="w-full px-4 py-2 mt-1 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" placeholder="아이디를 입력하세요" />
            </div>
            <div>
                <label htmlFor="password" class="block text-sm font-medium text-gray-700">
                    비밀번호
                </label>
                <input type="password" id="password" name="password" class="w-full px-4 py-2 mt-1 border border-gray-300 rounded-md focus:ring-green-500 focus:border-green-500" placeholder="비밀번호를 입력하세요" />
            </div>
            <div id="resultText" class="text-center text-red-500"></div>
            <div class="flex items-center justify-end">
                <a href="#" class="text-sm text-green-600 hover:underline">
                    비밀번호 찾기
                </a>
            </div>
            <button type="submit" class="w-full py-2 px-4 bg-green-500 text-white rounded-md shadow hover:bg-green-600">
                로그인
            </button>
        </form>
        <p class="mt-6 text-sm text-center text-gray-600">
            <a href="#" class="text-green-600 font-medium hover:underline">
                회원가입
            </a>
        </p>
    </div>
</div>
<script>
    function checkSubmit(form) {
      const username = form.username.value;
      const password = form.password.value;
      if (username.trim().length === 0) {
        alert("아이디를 입력하세요");
        form.username.focus();
        return;
      }
      if (password.trim().length === 0) {
        alert("비밀번호를 입력하세요");
        form.password.focus();
        return;
      }
      fetch("/login", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            username: username,
            password: password
          })
        })
        .then(response => response.json())
        .then(data => {
          if (data.resultCode === "200") {
            document.querySelector("#main").innerHTML = `
                        <div class="flex flex-col">
                            <div>${data.data}님 반갑습니다.</div>
                            <div>
                                <a href="/" class="text-green-600 hover:underline">메인화면으로 이동</a>
                            </div>
                        </div>
                    `;
          } else {
            document.querySelector("#resultText").innerText = data.msg;
          }
        })
    }

    function mainPage() {
      document.querySelector("#main").innerHTML = `
        <header>
            <nav class="flex gap-4">
                <a href="/" class="hover:text-green-400">home</a>
                <a href="/login.html" class="hover:text-green-400">login</a>
            </nav>
        </header>
        <main class="flex-1 flex flex-col justify-center items-center">
            <div className="flex flex-col gap-9">
                메인 컨텐츠
            </div>
        </main>
        <footer>
            푸터
        </footer>
        `
    }
</script>
</body>

</html>